<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>答题游戏</title>
   
    <style>
        #timer {
            position: absolute;
            top: 10px;
            right: 10px;
        }
        
    </style>
   
       
     <link rel="stylesheet" type="text/css" href="styles.css">
</head>
<body>
    <!--背景音樂-->
    
    <audio id="backgroundMusic" controls autoplay loop>
            <source src="../template/audio/背景音樂.mp3">

    </audio>
    <script>
        const backgroundMusic = document.getElementById("backgroundMusic");
        
        // 在页面加载后自动播放音乐
        document.addEventListener("DOMContentLoaded", () => {
            backgroundMusic.play()
                .catch(error => {
                    // 处理播放错误
                    console.error("自动播放失败:", error);
                });
        });
    </script>
   
    <!--背景音樂end-->

    <!--正確音效-->
        <audio id="correctMusic" controls>
            <source src="../template/audio/答案正確.mp3">
        </audio>
    <!--正確音效end-->

    <!--錯誤音效-->
        <audio id="errorMusic" controls>
            <source src="../template/audio/答案錯誤.mp3">
        </audio>
    <!--錯誤音效end-->

    <!--開獎音效-->
        <audio id="answerMusic" controls>
            <source src="../template/audio/開獎結果.mp3">
        </audio>

    <!--開獎音效end-->
     <!--使用者登入次數-->
     <div id="counter">答題人數：0</div>
     
     <script>
        // 讀取 Local Storage 中的計數器值
        let counterValue = parseInt(localStorage.getItem('counterValue')) || 0;
        
        // 顯示計數器值
        const counterElement = document.getElementById('counter');
        counterElement.textContent = `答題人數：${counterValue}`;
    
        // 每次開啟網站時，將計數器值增加 1 並更新顯示
        counterElement.textContent = `答題人數：${counterValue}`;
    
        // 將更新後的計數器值寫入 Local Storage
        localStorage.setItem('counterValue', counterValue.toString());
     </script>
    
     <!--end-->
    <div id="timer">剩餘時間: <span id="time-remaining">30</span> 秒</div>
    <h1>答題遊戲</h1>
    <div id="question-container" class="centered-container">

        
        <div id="question-text"></div>
            <div  class="main-container">
                <div id="ox">
                    <div  id="overlay">
                        <img class="overlay-item" id="overlay-image" src="../template/img/crrect2.png" alt="覆蓋圖片">
                    </div> 
                    <div  id="overlay">
                        <img class="overlay-item" id="overlay-image" src="../template/img/crrect2.png" alt="覆蓋圖片">
                    </div> 
                    <div  id="overlay">
                        <img class="overlay-item" id="overlay-image" src="../template/img/crrect2.png" alt="覆蓋圖片">
                    </div> 
    
                </div>
              
                <form id="answer-form">
                    <label> <input type="radio" name="answer" value="option1" ></label><br>
                    <label> <input type="radio" name="answer" value="option2" ></label><br>
                    <label> <input type="radio" name="answer" value="option3" ></label><br>
                </form>

               
            </div>
            
        <button id="next-button">按Ｎ下一題</button>
    </div>
   
    <div id="gifContainer">
        <img id="gifImage" src="../template/img/BrowserPreview_tmp.gif" alt="GIF" loop>
    </div>


    <script>
        let questionIndex = 0;
        let timeRemaining = 30;
        let correctAnswers = 0; // 用于记录答对的题数
        let timerInterval;

        // 
        const allQuestions = [
        {
            question: "請問世界地球日是哪一天? ",
            options: ["(A)4月22日", "(B)1月1日 ", "(C)12月25日"],
            correctAnswer: 0
        },
        {
            question: "愛護地球一起來，降低二氧化碳排放量，我們可以怎麼做? ",
            options: ["(A)搭乘大眾運輸", "(B)使用汽機車通勤", "(C)多用塑膠製品"],
            correctAnswer: 0
        },
        {
            question: "哪個銀行榮獲2022「TCSA台灣企業永續獎」之「永續報告-金融及保險業-第1類金級」及「永續單項績效-社會共融領袖獎」二項大獎肯定?",
            options: ["(A)日盛銀行", "(B)臺灣銀行", "(C)花旗銀行"],
            correctAnswer: 1
        },
        {
            question: "哪家銀行每年固定舉辦繪畫、攝影及書法比賽活動，鼓勵藝文創作? ",
            options: ["(A)日盛銀行", "(B)花旗銀行", "(C)臺灣銀行"],
            correctAnswer: 2
        },//
        {
            question: "假求職詐騙常有哪些特徵？",
            options: ["(A)要求繳交存摺或提款卡", "(B)提供大頭照", "(C)提供詳細地址"],
            correctAnswer: 0
        },//
        {
            question: "當親友以 Line 或臉書訊息要我們以手機幫忙代收簡訊及回傳認證碼，應該如何處理?",
            options: ["(A)助人為快樂之本，代收何妨", "(B)朋友帳號可能已遭盜用，應盡快聯繫他變更密碼及報警 ", "(C)轉告別人幫忙，以手機去代收"],
            correctAnswer: 1
        },//
        {
            question: "公司行號或民眾提、存大額現鈔時，不應該向何處申請警方免費護鈔?",
            options: ["(A)派出所", "(B)監理站 ", "(C)分局"],
            correctAnswer: 1
        },//
        {
            question: "可以買進黃金放在存摺裡，還能轉換成金條跟金幣的商品是什麼?",
            options: ["(A)黃金撲滿", "(B)黃金存摺", "(C)基金"],
            correctAnswer: 1
        },//
        {
            question: "黃金存摺跟黃金撲滿可以用哪些幣別來買?",
            options: ["(A)新台幣、美金、人民幣", "(B)新台幣、美金、日幣", "(C)新台幣、日幣、澳幣"],
            correctAnswer: 0
        },//
        {
            question: "臺灣銀行為了守護老年人的退休生活，開辦什麼信託服務?",
            options: ["(A)保險金信託", "(B)公益信託", "(C)樂活人生安養信託"],
            correctAnswer: 2
        },//
        {
            question: "結合安養信託和房屋租賃的商品是什麼?",
            options: ["(A)公益信託", "(B)保險金信託", "(C)以租養老"],
            correctAnswer: 2
        },//11
        {
            question: "辦理安養信託，可以到哪裡申辦?",
            options: ["(A)區公所", "(B)公共托老中心", "(C)臺灣銀行全省各分行"],
            correctAnswer: 2
        },//12
        {
            question: "在拍賣平台看到折扣超低的商品可以不用考慮直接下訂，避免錯失良機。",
            options: ["(A)先詢問家人朋友再下訂", "(B)是", "(C)否"],
            correctAnswer: 2
        },//13
        {
            question: "遭受詐騙應撥打?",
            options: ["(A)113", "(B)119", "(C)165"],
            correctAnswer: 2
        },//14
        {
            question: "不小心點到釣魚簡訊的連結可能會怎樣?",
            options: ["(A)自動幫你申請電信小額付款", "(B)騙你輸入個人資料、帳號或密碼", "(C)以上皆是"],
            correctAnswer: 2
        },//15
        {
            question: "詐騙集團最常利用何種工具、管道實施詐騙？",
            options: ["(A)問卷調查", "(B)登門拜訪", "(C)網路"],
            correctAnswer: 2
        },//16
        {
            question: "小明在臉書上看到好友小花張貼販賣便宜手機的貼文，但他發現低於市價太多，你覺得小明應該購買嗎?",
            options: ["(A)問小花", "(B)不應該", "(C)應該"],
            correctAnswer: 2
        },//17
        {
            question: "若要透過網路購物應選擇有消費權益保護機制或第三方支付的拍賣購物平台。",
            options: ["(A)是", "(B)否", "(C)看價差是否很大"],
            correctAnswer: 0
        },//18
        {
            question: "遇有歹徒利用流行的Line或臉書軟體，以傳訊息「裝熟」或「恫嚇」方式，要求點選其附上的連結網址時，應如何處理？",
            options: ["(A)直接點選連結", "(B)立即報警處理", "(C)不理會"],
            correctAnswer: 2
        },//19?
        {
            question: "臉書近期的詐騙手法有哪幾種?",
            options: ["(A)投資社團", "(B)一頁式廣告", "(C)以上皆是"],
            correctAnswer: 2
        },//20
        {
            question: "接到自稱是公務單位電話的通知，健保卡遭人冒用盜領三倍券，需監管銀行帳戶，要求提領現金、交付銀行存摺、印鑑等等，須提高警覺，並立即向???諮詢專線查證。",
            options: ["(A)165", "(B)1999", "(C)104"],
            correctAnswer: 0
        },//21
        {
            question: "若發現自己遭受詐騙怎麼辦?",
            options: ["(A)前往派出所報案", "(B)打電話訴苦", "(C)放著不管"],
            correctAnswer: 0
        },//22
        {
            question: "請問接到要求操作 ATM 自動提款機電話時，最好的處理方式為：",
            options: ["(A)照著電話內容或對方指示去做", "(B)先掛電話，再依照來電顯示回撥", "(C)不要依指示操作，立即向 165 反詐騙諮詢專線查證"],
            correctAnswer: 2
        },//23
        {
            question: "下列那項行為是錯誤的?",
            options: ["(A)發現自己即時通帳號密碼遭人盜用竄改時，應儘快聯絡好友提高警覺", "(B)臉書或其他網購賣場、平臺販賣便宜「三倍券」，真好康!快揪朋友購買", "(C)預防網路帳號遭盜用，平時應定期執行電腦掃毒，不上安全性較低的網頁或下載。"],
            correctAnswer: 1
        },//24
        {
            question: "請問那些來電號碼可能是詐騙電話？",
            options: ["(A)+8612345678", "(B)0800-000-123", "(C)以上皆是"],
            correctAnswer: 0
        },//25
        {
            question: "網路購物後，接到自稱商家名義來電告訴你因為公司作業程序錯誤，將改為分期付款方式，按月向你扣款，並將由顯示銀行客服專線來電號碼之行員教你到 ATM按照指示操作ATM機台解除分期，你會如何選擇?",
            options: ["(A)顯示是銀行客服專線來電無誤，馬上按照來電電話指示配合操作 ATM", "(B)馬上和商家聯繫並打165諮詢查證是否屬實", "(C)以上皆非"],
            correctAnswer: 1
        },//26
        {
            question: "請問ATM自動提款機沒有下列那項功能？",
            options: ["(A)解除分期付款", "(B)轉帳", "(C)提款"],
            correctAnswer: 0
        },//27
        {
            question: "網路購物詐騙多，為減少受騙，以下觀念何者為非? ",
            options: ["(A)堅持面交商品", "(B)考慮賣家的商品來源，確保商品安全並可查詢售票系統商家，查驗票卷真偽", "(C)拍賣網站上不可能會有假賣家"],
            correctAnswer: 2
        },//28
        {
            question: "詐騙歹徒會以各種手段取得個人資料，再假冒親友及熟人借錢，以下何者為非?",
            options: ["(A)接到不明親友來電提出借錢要求，且不斷來電表示非常緊急，應先以現在不方便接聽電話，掛斷電話", "(B)找出自己的通訊錄，親自撥打親友電話號碼，並查證是否需要借錢", "(C)聽音辨人，馬上就匯錢給對方"],
            correctAnswer: 2
        },//29
        {
            question: "簡訊內容如(寄送的三倍券已送達、○○優惠訊息等)，並且夾帶網址，應該如何處理? ",
            options: ["(A)立即點擊連結網址，以獲得相關優惠", "(B)不明連結請勿點擊! 點了連結網址手機可能就中毒，或遭電信小額付款、盜刷信用卡等", "(C)好康道相報，將連結網址轉傳給家人及好朋友"],
            correctAnswer: 1
        },//30
        {
            question: "下列有關社群軟體的使用敘述，何者為真?",
            options: ["(A)通常社群軟體已規範使用人的居住地，所以在我國上網，使用人一定是住在本國", "(B)社群軟體的帳號密碼外洩也不用擔心，因為經營者一定會賠償", "(C)社群軟體中不要傳輸或溝通帳號、密碼或信用卡等個人資料，以維護個人資訊安全"],
            correctAnswer: 2
        },//31
        {
            question: "即時通訊的詐騙行為，如何確認詐騙者的位置?",
            options: ["(A)一定在台灣", "(B)一定在美國", "(C)網路連接的地方都有可能"],
            correctAnswer: 2
        },//32
        {
            question: "檢警在調查偵辦案件時，下列事項何者錯誤：",
            options: ["(A)監管您的帳戶、存摺", "(B)要求至便利商店收取公文書", "(C)以上皆是"],
            correctAnswer: 2
        },//33
        {
            question: "如何避免即時通訊軟體詐騙行為?",
            options: ["(A)定時修改個人密碼避免外洩", "(B)不輕易協助他人進行有價值之交易行為", "(C)以上皆是"],
            correctAnswer: 2
        },//34
        {
            question: "提款機只出不進，當有人跟你提出哪些關鍵字就有可能是詐騙？",
            options: ["(A)通知設定錯誤，設成分期付款，要求至提款機前更改", "(B)去自動提款機確認身分", "(C)以上皆是"],
            correctAnswer: 2
        },//35
        {
            question: "當接到陌生電話，不要因為對方清楚說出自己或親友個資就貿然相信對方身分，要牢記哪 3 個步驟?防止被詐騙。",
            options: ["(A)一問、二查、三聽", "(B)一停、二看、三聽", "(C)一聽、二掛、三查"],
            correctAnswer: 2
        },//36
        {
            question: "假冒公務機關詐騙案件中，何者不是歹徒常用的說詞？",
            options: ["(A)監管帳戶", "(B)購買遊戲點數", "(C)戶頭被盜用"],
            correctAnswer: 1
        },//37
        {
            question: "花媽剛學會使用 Line，她可以做哪些設定以保障使用安全？",
            options: ["(A)設定「換機密碼」", "(B)開啟「允許其他裝置登入」功能", "(C)開啟「公開 ID」功能"],
            correctAnswer: 0
        },//38
        {
            question: "防範以「解除分期付款」為理由的詐騙，下列哪個是正確作法？",
            options: ["(A)把提款卡密碼給對方", "(B)不要聽從他人指示操作ATM及購買遊戲點數", "(C)照著對方指示進行"],
            correctAnswer: 1
        },//39
        {
            question: "下列何者不是防範網路購物詐騙的方法？",
            options: ["(A)店家評價良好，聯絡資訊完整且正確", "(B)選擇面交並驗貨", "(C)使用 Line 及臉書交易"],
            correctAnswer: 2
        },//40
        
    ];

    // 随机抽选3个问题
    const selectedQuestions = [];
    while (selectedQuestions.length < 40) {
        const randomIndex = Math.floor(Math.random() * allQuestions.length);
        if (!selectedQuestions.includes(randomIndex)) {
            selectedQuestions.push(randomIndex);
        }
    }

    const questions = selectedQuestions.map(index => allQuestions[index]);
   
        let questionNumber = 1; // 初始题号为 1
        displayQuestion(questionIndex);
        timerInterval = setInterval(updateTimer, 1000);

        function displayQuestion(index) {
           
            const questionContainer = document.getElementById("question-container");
            const questionText = document.getElementById("question-text");
            const answerForm = document.getElementById("answer-form");
            const options = questions[index].options;
            //問題
            questionText.textContent = `Q： ${questionNumber}：${questions[index].question}`; // 显示题号

            const optionLabels = answerForm.querySelectorAll("label");
            optionLabels.forEach((label, i) => {
                label.innerHTML = `<input type="radio" name="answer" value="option${i + 1}">${options[i]}`;
            });
        }

        function endGame(){
            document.getElementById("next-button").style.display = "block";
            //開獎音效
            const soundEffect3 = document.getElementById("answerMusic");
            soundEffect3.play();
             
            clearInterval(timerInterval);
            document.getElementById("question-text").textContent = "遊戲結束！";
            //gif得獎特效
            const gifContainer = document.getElementById("gifImage");
            gifContainer.style.display = "block"; // Show the gifContainer
                                
            //下一個按鈕
            document.getElementById("next-button").textContent = "按Ｓ回到待機畫面";
            document.getElementById("question-text").style.display = "none";              
                              
            // 显示用户答对的题数
            const resultText = document.createElement("p");
            resultText.style.fontSize = "30px";
            resultText.style.color = "red";   
            if (correctAnswers >= 10) {
                resultText.textContent = `你答對了 ${correctAnswers} 題！恭喜你獲得頭獎！！`;
            } else if (correctAnswers >= 7) {
                resultText.textContent = `你答對了 ${correctAnswers} 題！恭喜你獲得貳獎！！`;
            } else if (correctAnswers >= 4) {
                resultText.textContent = `你答對了 ${correctAnswers} 題！恭喜你獲得參獎！！`;
            } else {
                resultText.textContent = `你答對了 ${correctAnswers} 題！恭喜你獲得參加獎！！`;
                }

            document.getElementById("question-container").appendChild(resultText);
            document.getElementById("ox").style.display = "none";
            document.getElementById("answer-form").style.display = "none";
            nextButton.disabled = false;

        }
        
        //
        function updateTimer() {
            const timeRemainingElement = document.getElementById("time-remaining");
            timeRemainingElement.textContent = timeRemaining;
            if (timeRemaining <= 0) {
                clearInterval(timerInterval);
                endGame();
            }
            timeRemaining--;
        } 
        
            function initGame() {
                //紅圈圈位置012
                document.getElementById("next-button").style.display = "none";
                let correctIndex = 9999;
                const overlayItems = document.querySelectorAll(".overlay-item");
                let currentAnswer =4;
                //監聽按鈕
                document.addEventListener('keydown', function(event) {
                    const key = event.key.toLowerCase();
                    if (key === 'a' || key === 'b' || key === 'c') {
                        let option = 'option1';
                        switch (key) {
                            case 'a':
                                option = 'option1';
                                currentAnswer =0;
                                correctIndex = questions[questionIndex].correctAnswer;
                                break;
                            case 'b':
                                option = 'option2';
                                currentAnswer =1;
                                correctIndex = questions[questionIndex].correctAnswer;
                                break;
                            case 'c':
                                option = 'option3';
                                currentAnswer =2;
                                correctIndex = questions[questionIndex].correctAnswer;
                                break;
                            default:
                                option = 'option0';
                                break;
                        }

                        const selectedOption = document.querySelector(`[value="${option}"]`);
                        if (selectedOption) {
                            
                            selectedOption.checked = true;
                            //顯示紅圈圈
                            overlayItems[ correctIndex ].style.visibility= "visible";   
                            //按下音效
                            //當前選擇按鈕＝>currentAnswer
                            const soundEffect1 = document.getElementById("correctMusic");
                            const soundEffect2 = document.getElementById("errorMusic");
                            
                                
                                if (correctIndex === currentAnswer ) {
                                    soundEffect1.play();
                                } else {
                                    soundEffect2.play();
                                }
                                // 添加一个定时器来延时一秒后执行跳转逻辑
                            setTimeout(() => {
                                //消紅圈圈
                                overlayItems[ correctIndex ].style.visibility= "hidden";  
                                //下一題功能
                                questionNumber++;
                                //
                                const selectedAnswer = document.querySelector('input[name="answer"]:checked');
                                if (selectedAnswer) {
                                    const selectedValue = selectedAnswer.value;
                                    const correctIndex = questions[questionIndex].correctAnswer;
                                    if (selectedValue === `option${correctIndex + 1}`) {
                                        correctAnswers++; // 如果答案正确，答对题数加一
                                    }
                                    questionIndex++;
                                    if (questionIndex < questions.length) {
                                        displayQuestion(questionIndex);
                                    } else {
                                        endGame();
                                    }

                                    // 清除选中的答案
                                    selectedAnswer.checked = false;
                                }
                            }, 1000);
                                                  
                        }
                    }
                    if (event.key === "s" ) {
                        const gifContainer = document.getElementById("gifImage");
                        gifContainer.style.display = "none"; // Show the gifContainer
                        window.location.href = "index.html";
                    }
                });

                
               
            }

        initGame();

      
   
    </script>
</body>
</html>
